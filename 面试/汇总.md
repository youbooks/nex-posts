# JVM

## 调优

## 垃圾回收



### 内存结构，堆区的分代，垃圾回收以及所用算法。

### 为什么要划分年轻代和老年代，方法区是否会垃圾回收

### gc时要扫描哪些位置

在Java虚拟机中判断一个对象是否可以被回收，有一种做法叫可达性分析算法，也就是从GC Root到各个对象，如果GC Root到某个对象还有可达的引用链，那么这个对象就还不能被回收，否则就等着被收割吧。  

这里既然提到了GC Root，那么哪类对象可以作为GC Root呢，这是一个在面试中经常被问到的问题。  

《深入理解Java虚拟机》一书中是这么说的，一下几种对象可以作为GC Root：  

- 虚拟机栈中的引用对象
- 方法区中类静态属性引用的对象
- 方法区中常量引用对象
- 本地方法栈中JNI引用对象



### 排查堆内存的问题

说使用jmap转储dump文件分析或者使用jstat等工具检测gc。

### 代码中遇到进程阻塞，进程僵死，内存泄漏等情况怎么排查。通过ps查询状态，分析dump文件等方式排查。

Linux的cpu 100怎么排查，top jstack，日志，gui工具



### Java会有内存泄漏吗，三个区分别什么情况下会产生内存泄漏





### JVM内存模型介绍一下，堆区怎么分代，分代垃圾回收算法说一下，老年代使用标记清除有什么问题。gc root可达性分析

### 说几个垃圾回收器，cms回收器有哪几个过程，停顿几次，会不会产生内存碎片。老年代产生内存碎片会有什么问题。问我有没有做过JVM优化。

### 标记清除多次后老年代产生内存碎片，引起full gc，接下来可能发生什么问题。我说分配大对象可能引起full gc。

### 哪些情况会触发full gc，full gc是否包括young gc和major gc，如果只包括这两个，为什么要特地做full gc，我回答的是full gc还会回收方法区和堆外内存。



## 类加载机制说一下，除了双亲委派，再说一下更具体的过程，什么时候进行静态变量的初始化。





## Classloader



### 自定义类加载器怎么实现，其中哪个方法走双亲委派模型，哪个不走，不走的话怎么加载类

（实现findclass方法，一般用defineclass加载外部类），如何才能不走双亲委派。（重写loadclass方法）

---



# JDK

## 线程池

### 参数

### 阻塞队列

### 拒绝策略

### 怎么修改源码可以实现线程状态的监控呢

visualvm工具  

###  fixethreadpool使用的是什么阻塞队列，如果使用arrayblockingqueue或者linkedblockingqueue会有什么问题。



## ArrayList和linkedlist有什么区别，扩容呢

### Java的四种引用

## Java的线程通信方式

### 如何中断线程，await和sleep区别

### Java的string类型为什么是不可变的

### Java如何把byte类型转换成字符串



## HashMap

### jdk1.8针对hashmap使用红黑树优化目的是什么，红黑树的结构说一下。

红黑树的特性:  

（1）每个节点或者是黑色，或者是红色。  

（2）根节点是黑色。  

（3）每个叶子节点（NIL）是黑色。 [注意：这里叶子节点，是指为空(NIL或NULL)的叶子节点！]  

（4）如果一个节点是红色的，则它的子节点必须是黑色的。  

（5）从一个节点到该节点的子孙节点的所有路径上包含相同数目的黑节点。  

###  hashmap的结构，1.7和1.8有哪些区别，除了红黑树优化以外还有哪些改进

扩容时头插法改尾插法

### hashmap头插法和尾插法有什么区别呢，会有什么问题。



### 开始问我头插法和尾插法的区别，头插法在多线程时会出现什么问题，我说的是扩容时的死链，后来引导我说了并发插入的数据丢失问题。

### hashmap如何处理冲突，除了使用红黑树和重写hashcode外还有哪些方法







## object类有哪些方法，hashcode，equals，clone，notify，wait。问我hashcode用在哪

## wait和notify方法用在哪里，wait和sleep的区别，notify后面的代码会不会运行

## 多线程之间的通信

##  ArrayList和linkedlist有什么区别，如何遍历，使用for循环遍历linkedlist为什么不行，linkedlist能使用索引访问么，使用迭代器呢

linkedlist也可以使用for循环遍历。因为jdk提供了api。



## Java中有哪些引用，分别有什么用。



## 单例模式写一下

## 死锁写一下



## Java的反射讲一下，如何获取重载方法和私有吵架。



---





# 并发



## 线程安全集合

### concurrenthashmap的实现原理，1.7和1.8有什么区别，分段锁，synchronized和cas操作。

### Java的集合类哪些是线程安全

copyonwritelist....



## 并发常用类

### 信号量



### countdownlatch，为什么要用，有什么问题，如何监控这个问题。



##synchronized和lock的区别在哪里，使用方式上有什么区别。lock的trylock方法做了什么，我说了cas操作和加入阻塞队列，以及公平锁和非公平锁的区别。



## volatile  i++是不是原子操作，为什么



---





# 网络



## TCP

### 负载均衡算法

### 三次握手和四次握手,最后一次ack如果客户端没收到怎么办,time wait状态有什么意义

### 全连接队列和半连接队列

### TCP和UDP有什么区别，为什么迅雷下载是基于UDP的

滑动窗口保证可靠有序传输，UDP不可靠。TCP需要连接而UDP不需要

### TCP和IP报文是否会分片，分别在什么情况下会分片。

### TCP分包之后是否还会进行ip分片





## HTTP

### http请求过程会发生什么

### http协议有哪些内容，cookie是哪个字段，在文本中如何确定哪个是字段哪个是值。

### http1.0和2.0的区别

答了TCP连接复用，加入ssl，以及压缩请求头。

其中哪个更新比较有意义，为什么。我说的是压缩请求头，这样可以优化HTTP服务的性能。





## NIO

### epoll模型



### 说下BIO和NIO的区别把。

我说了BIO的阻塞用法，以及NIO的IO多路复用用法，说了selector，seletedkey，channel等类的使用流程，以及单线程处理连接，多线程处理IO请求的好处。

### socket编程，accept方法是干什么的，在三次握手中属于第几次



## Netty

### reactor

### 断线重连解决方案

### 半包拆包

### 流程

1 channelhandler负责请求就绪时的io响应。

2 bytebuf支持零拷贝，通过逻辑buff合并实际buff。

3 eventloop线程组负责实现线程池，任务队列里就是io请求任务，类似线程池调度执行。

4 acceptor接收线程负责接收tcp请求，并且注册任务到队列里。

---





# 操作系统

### Linux的磁盘管理

### Linux有哪些进程通信方式

### Linux的共享内存如何实现

### 共享内存实现的具体步骤

### cgroup在linux的具体实现

### 僵尸进程和孤儿进程是什么，分别有什么危害,如何避免僵尸进程，我说让父进程显示通知，那父进程怎么知道子进程结束了，答不会。

### 操作系统的死锁必要条件，如何避免死锁。

###  Linux命令了解哪些

### Linux大文件怎么查某一行的内容。

### proc文件系统了解么

### 虚拟内存和页面置换





### 进程的通信方式

### CPU的执行方式





# 算法

## 二叉树

### 写一个插入树节点到一颗排序树的插入方法，使用递归方式找到插入位置即可。

### 找到二叉树中最长的一条路径

### 有N个节点的满二叉树的高度。1+logN

### 完全二叉树判断





## 链表

### 链表的排序

链表的排序，扯了4、5种方案，转成数组，直接排序，拆分再排序，顺序连接等等

### 单链表判环

使用快慢指针解决



## 字符串

## 数组

### 找一个无序数组的中位数

## 栈

### 两个栈实现队列，两个栈实现最小值栈



## 排序

### 快排，然后让我找到无序数组第k大的一个数，我说先排序再找，实际上可以用快排的partition函数。

### 快排的时间复杂度，最坏情况呢，最好情况呢，堆排序的时间复杂度呢，建堆的复杂度是多少

### 有序数组排序，二分

### 快排是否稳定，快排的过程

### 100w个数，怎么找到前1000个最大的，堆排序，怎么构造，怎么调整，时间复杂度。





## 图

### 怎么判断图中有没有环

我说直接dfs走到原点即为有环，刚开始写的时候我又问了一嘴是不是只要找到一个就行，面试官说是的，然后我说这样应该用bfs，有一次访问到原节点就是有环了。

面试官问我不用递归能不能做这个题，其实我都还没开始写。然后我就说没有思路，他提示我拓扑图。我没明白拓扑图能带来什么好处。现在一想，好像当访问过程中找不到下一个节点时就说明有环。做一个访问标记应该就可以。



# 其他

### 写一个斐波那契数列



### 写一个LRU的缓存，需要完成超时淘汰和LRU淘汰。

### 

### 倒排索引

其实就是搜索引擎的基础索引，根据关键字到文档的映射关系建立索引，中文关键字可以使用中文分词，查询时通过关键字来定位索引，并且进行排序后得到文档结果集。

### 如何实现关键字输入提示，使用字典树，复杂度多少，有没有其他方案，答哈希，如果是中文呢，分词后建立字典树？

### 红黑树的结构，查询性能



### 10g文件，只有2g内存，怎么查找文件中指定的字符串出现位置。MapReduce分割文件处理。

他说可以用cat | grep 管道处理。



### 十亿个数的集合和10w个数的集合，如何求它们的交集。

集合的数字不重复。

我讲了两次循环，两次hash，以及排序或者合并等方式。。都不对。后来面试官说是对小数组做hash，然后遍历大数组即可。我完全想错方向了。



### 十亿和数找到前100个最大的，堆排序，怎么实现，怎么调整。



---





# 分布式

### 分布式系统的全局id如何实现

### 分布式锁的方案，redis和zookeeper那个好，如果是集群部署，高并发情况下哪个性能更好

### 亿级ip地址过滤

### 布隆过滤器

### CAP和BASE，最终一致性

### 一致性问题:2pc，3pc，raft和paxos，zab

### 分布式文件系统了解么，HDFS讲一下原理



### 跨机房的网络延迟怎么解决



---



# 设计模式

### 知道适配器模式怎么实现么，有什么用



---



# Tomcat

## Tomcat的类加载器

### Tomcat的基本原理，了解的是哪一部分，基本架构，connector和container





# MySQL

## 索引

### innodb的b+树索引，主键索引，聚簇索引有什么区别

### 建立索引要考量的点

1、表的主键、外键必须有索引；  

2、数据量超过300的表应该有索引；  

3、经常与其他表进行连接的表，在连接字段上应该建立索引；  

4、经常出现在Where子句中的字段，特别是大表的字段，应该建立索引；  

5、索引应该建在选择性高的字段上；  

6、索引应该建在小字段上，对于大的文本字段甚至超长字段，不要建索引；  

7、频繁进行数据操作的表，不要建立太多的索引；  

### 为什么用b+树做索引节点，一个节点存了多少数据，怎么规定大小，与磁盘页对应。

### 一级和二级索引的区别，什么时候可以不用查一级索引。答覆盖索引。

### 联合索引的匹配原则

### 索引什么时候会失效变成全表扫描

联合索引的前缀匹配，跳跃索引，聚合函数，判空和<>这些情况。

### redo undo binlog





## 扩容

## 分库分表

## 各引擎区别

## 隔离级别

MVCC多版本并发控制，适用于读多写少，所以不加锁。

### 两个事务，一个查一个新增，问能否查到新增的

### 两个事务，一个写提交，另一个能不能读到



我问他隔离级别，他说RR。MySQL的RR避免幻读，所以读不到新增数据。

## 锁

### MySQL里有哪些锁，行锁表锁，乐观锁呢，我说了版本号和MVVC，开始问我MVVC。

### MySQL的死锁怎么产生的，举了两个例子。

### 悲观锁和乐观锁



## 慢SQL定位及优化

## sql优化的方式





---



# Redis

## 持久化方式及其实现的底层实现原理

## 集群高可用方式

## 缓存的几种淘汰策略

### 如果Redis有1亿个key，使用keys命令是否会影响线上服务，我说会，因为是单线程模型，可以部署多个节点。

### Redis的list是怎么实现的，我说用ziplist+quicklist实现的，ziplist压缩空间，quicklist实现链表。

### sortedset怎么实现的，使用dict+skiplist实现的，问我skiplist的数据结构，大概说了下是个实现简单的快速查询结构。



### Redis内存数据库的内存指的是共享内存么



---





# Spring

### SpringMVC的启动过程



### ioc和aop

### 动态代理和静态代理有什么区别



### Spring的bean如果要在实例化过程中修改其某一个成员变量，应该怎么做呢。不通过构造方法，并且AOP也并不能实现



### autowired和resource有什么区别，作用域有哪些。





---



# zookeeper源码



---



# Raincat源码(分布式事务)



---



# Apollo源码(配置中心)



---



# Sofa源码(RPC+网络)

### 服务容错怎么做，怎么知道服务器宕机了 zk的心跳机制维持服务器连接





---



# rocketmq源码(消息队列)

---



# 系统设计

## 秒杀系统的架构设计

## 微信红包

## 微信朋友圈如何设计

## 扫二维码实现

