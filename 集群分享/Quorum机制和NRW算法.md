## Quorum机制

​Quorum，原指为了处理事务、拥有做出决定的权力而必须出席的众议员或参议员的数量**（一般指半数以上）**。

Quorum控制同一份数据不会同时读写，写请求需要的副本数要求超过半数，写操作时就没有足够的副本给读操作；
Quorum控制同一份数据的串行化修改，因为副本数要求，同一份数据不会被两个写请求同时修改。

## 内容

Quorum又被称为NWR协议：R表示读取副本的数量；W表示写入副本的数量；N表示总的节点数量。 
假设N=2，R=1，W=1，R+W=N=2，在节点1写入，节点2读取，无法得到一致性的数据；
假设N=2，R=2，W=1，R+W>N，任意写入某个节点，则必须同时读取所有节点；
假设N=2，W=2，R=1，R+W>N，同时写入所有节点，则读取任意节点就可以得到结果。
要满足一致性，必须满足R+W>N。NWR值的不同组合有不同效果，当W+R>N时能实现强一致性。所以工程实现上需要N>=3，因为冗余数据是保证可靠性的手段，如果N=2，损失一个节点就退化为单节点。写操作必须更新所有副本数据才能操作完成，对于写频繁的系统，少数节点被写入的数据副本可以异步同步，但是只更新部分节点，读取则需要访问多个节点，读写总和超过总节点数才能保证读到最新数据。可以根据请求类型调整BWR，需要可靠性则加大NR，需要平衡读写性能则调整RW。 


## 读写配置策略

  假设N=5N=5， 如果R=1R=1， 那么WW必须是55. 所以就是写入所有的节点是全部节点，那么读取任何一个节点就可以最新的数据。 有点就是像读写锁了。 
     如果R=5R=5， 那么WW只要是11就可以了。 那么写的效率就非常高。 读取的效率比较低。 
     如果W=N/2+1W=N/2+1， R=N/2R=N/2， 读写之间为达到某个平衡。 是不错的策略。兼顾了性能和可用性，Dynamo系统的默认设置就是这种。 
     **R/W的配置的关系决定了哪种操作的开销。**
